{% extends "base.html" %}

{% block title %} WINE RESULTS {% endblock %}


{% block content %}

  <!-- <h1 class="title is-1 has-text-centered mt-6">Want to.</h1> -->

<!-- ===============================  ORIGINAL WINE STYLE SORTING BAR  ===============================  -->


<!-- <div id="wine-style"class="tabs is-centered">
  <ul>
    <li class="is-active wine-style"><a>All</a></li>
    <li class="wine-style"><a>Blends</a></li>
    <li class="wine-style"><a>Single Varietals</a></li>
  </ul>
</div> -->


<!-- ===============================  ORIGINAL SIDE BAR  ===============================  -->

<!-- <div class="columns my-3 mx-3">

<div class="column is-one-quarter">
<aside class="menu sticky">
  <ul class="menu-list">
    <li>
      <div><p class="">Filter By</p></div>
      <ul id="checkboxes" class="hidden">
        {% for filter in session['filters'] %}
          {% if filter in session['filter_by'] %}
            <li><label class="panel-block"><input type="button" class="button is-primary is-outlined is-rounded is-small mx-2 is-focused" checked="checked">{{filter}}</label></li>
          {% else %}
            <li><label class="panel-block"><input type="button" class="button is-primary is-outlined is-rounded is-small mx-2">{{filter}}</label></li>
          {% endif %}
        {% endfor %}
      </ul>
    </li>
    
  </ul>

  <ul class="menu-list">
    <li><a id="choose-varietals" class="">Choose Varietals</a></li>
</ul>
   
</aside>
</div> -->



<!-- ===============================  SORT BY SIDE BAR  ===============================  -->
<div id="flash" class=""></div>
<div class="columns my-3 mx-3">

<div class="column is-one-fifth">
<aside class="menu sticky">
  <ul class="menu-list">
    <li>
      <li><a id="choose-wine-type" class="noselect">Wine Types</a></li>
      <hr class="dropdown-divider">
      <ul id="wine-type-checkboxes" class="hidden">
        {% for type in session['wine_type_options'] %}
          {% if type in session['wine_type'] %}
            <li><label class="panel-block"><input type="button" class="button is-primary is-outlined is-rounded is-small mx-2 is-focused" checked="checked">{{type}}</label></li>
          {% else %}
            <li><label class="panel-block"><input type="button" class="button is-primary is-outlined is-rounded is-small mx-2">{{type}}</label></li>
          {% endif %}
        {% endfor %}
      </ul>
    </li>
  </ul>
  <ul class="menu-list">
    <li>
      <li><a id="choose-wine-style" class="noselect">Wine Style</a></li>
      <hr class="dropdown-divider">
      <ul id="wine-style-checkboxes" class="hidden">
        {% for style in session['wine_style_options'] %}
          {% if style in session['wine_style'] %}
            <li><label class="panel-block"><input type="button" class="button is-primary is-outlined is-rounded is-small mx-2 is-focused" checked="checked">{{style}}</label></li>
          {% else %}
            <li><label class="panel-block"><input type="button" class="button is-primary is-outlined is-rounded is-small mx-2">{{style}}</label></li>
          {% endif %}
        {% endfor %}
      </ul>
    </li>
  </ul>
  <ul class="menu-list">
    <li>
      <li><a id="choose-sort-by" class="noselect">Sort By</a></li>
      <hr class="dropdown-divider">
      <ul id="sort-by-checkboxes" class="hidden">
        {% for sort in session['sort_by_options'] %}
          {% if sort in session['sort_by'] %}
            <li><label class="panel-block"><input type="button" class="button is-primary is-outlined is-rounded is-small mx-2 is-focused" checked="checked">{{sort}}</label></li>
          {% else %}
            <li><label class="panel-block"><input type="button" class="button is-primary is-outlined is-rounded is-small mx-2">{{sort}}</label></li>
          {% endif %}
        {% endfor %}
      </ul>
    </li>
  </ul>

  <ul class="menu-list">
    <li><a id="choose-varietals"  class="noselect">Varietals</a></li>
</ul>
    <!-- ===============================  NEW SORT BY ===============================  -->
<hr class="dropdown-divider">

<!-- <div class="dropdown is-active">
  <div class="dropdown-trigger">
    <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
      <span>Dropdown button</span>
    </button>
  </div>
</div> -->

    
</aside>
</div>


<!-- ===============================  WINE CARDS  ===============================  -->

<div class="column is-three-quarters">
<div class="columns my-3 mx-3 is-multiline" id="wine-results">
{% for wine in wines%}
  {% if wine == 'No Results' %}
  <h3 class="title is-3 has-text-centered mt-6">No wines available.</h3>
{% else %}

<div class="column is-half">
  <div class="has-text-centered">
  </div>
  
  <article class="message is-dark">
  
  <div class="message-header">
    <p>{{wine['Name']}}</p>
  </div>

  <div class="message-body">
    <p><strong>NAME: </strong>{{wine['Name']}}</p>
    <p><strong>WINERY: </strong>{{wine['Winery']}}</p>
    <p><strong>COUNTRY: </strong>{{wine['Country']}}</p>
    <p><strong>AREA: </strong>{{wine['Area']}}</p>
    <p><strong>VINTAGE: </strong>{{wine['Vintage']}}</p>
    <p><strong>VARIETAL: </strong>{{wine['Varietal']}}</p>
    <p><strong>TYPE: </strong>{{wine['Type']}}</p>
    <p><strong>RATING: </strong>{{wine['Rating']}}</p>
  </div>

  <div class="columns">
    <div class="column is-half has-text-centered mx-0 my-0">
      <!-- <form method="POST" action="/user/add_favorite/{{wine['ID']}}" id="review-form"> -->
      {% if wine['ID'] in user_favorites %}
      <button class="button is-dark fav-button favorite-button" data-id="{{wine['ID']}}" type="submit">
      {% else %}
      <button class="button is-text fav-button favorite-button" data-id="{{wine['ID']}}" type="submit">
      {% endif %}
      
        <span class="icon is-small">
        <i class="fas fa-thumbtack"></i>
        </span>
      </button>
      <!-- </form> -->
    </div>
    <div class="column is-half has-text-centered mx-0 my-0" id="review-btn">
      <form method="POST" action="/user/review/{{wine['ID']}}" id="review-form">
      <button class="button is-text review-btn" data-id="{{wine['ID']}}">
        <span class="icon is-small is-right review-btn">
        <i class="fas fa-pen review-btn"></i>
        </span>
      </button>
      </form>
    </div>
  </div>
</article>

</div>
  
  {% endif %}
{% endfor %}
</div>
</div>
</div>

<!-- ===============================  MODAL FOR VARIETALS  ===============================  -->


<div id="modal" class="modal">
  <div class="modal-background"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">Varietals</p>
      <!-- <button class="delete toggle-off" aria-label="close"></button> -->
    </header>
    <section id="varietals-modal" class="modal-card-body">
      <!-- Content ... -->
    </section>
    <footer class="modal-card-foot">
      <button class="button is-success toggle-off">Save</button>
      <!-- <button class="button toggle-off">Cancel</button> -->
    </footer>
  </div>
</div>

{% endblock %}
